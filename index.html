<!DOCTYPE html>
<html lang="en">
    <head>
        <title>ChronoTailor: Harnessing Attention Guidance for Fine-Grained Video Virtual Try-On</title>

        <meta charset="UTF-8">
        <meta name="author" content="Jinjuan Wang, Wenzhang Sun, Ming Li, et al.">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" href="static/css/bulma.min.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Arvo|Roboto&display=swap">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="https://cdn.rawgit.com/jpswalsh/academicons/master/css/academicons.min.css">
        <link rel="stylesheet" href="https://unpkg.com/@glidejs/glide/dist/css/glide.core.min.css">
        
        <link rel="stylesheet" type="text/css" href="style_project_page.css?cache=7754391418498779889">

        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script src="https://unpkg.com/@glidejs/glide"></script>

        <style type="text/tailwindcss">
            @layer utilities {
                .content-auto {
                    content-visibility: auto;
                }
                .video-shadow {
                    box-shadow: 0 4px 18px rgba(0,0,0,0.15);
                }
                .hover-lift {
                    transition: transform 0.3s ease, box-shadow 0.3s ease;
                }
                .hover-lift:hover {
                    transform: translateY(-5px);
                    box-shadow: 0 10px 25px rgba(0,0,0,0.2);
                }
            }
        </style>

        <style type="text/tailwindcss">
            @layer utilities {
                .text-shadow {
                    text-shadow: 0 2px 4px rgba(0,0,0,0.1);
                }
                .animate-spin-slow {
                    animation: spin 2s linear infinite;
                }
                .progress-bar {
                    height: 5px;
                    background: linear-gradient(to right, #3B82F6, #60A5FA);
                    transition: width 0.3s ease;
                }
            }
        </style>

        <style>
            /* 基础布局 */
            .side-text {
                width: 60%;
                display: inline-block;
                vertical-align: top;
            }
            .side-image {
                width: 38%;
                display: inline-block;
                vertical-align: top;
            }
            .render_window {
                display: inline-block;
                vertical-align: middle;
                margin-right: 10px;
                margin-bottom: 10px;
                width: calc(33% - 10px);
            }

            /* 响应式布局 */
            @media (max-width: 400px) {
                .render_window {
                    display: block;
                    width: 90%;
                    margin: 10px auto;
                }
            }
            @media (max-width: 700px) {
                .side-image {
                    display: block;
                    width: 80%;
                    margin: 10px auto;
                }
                .side-text {
                    display: block;
                    width: 100%;
                }
            }
            
            /* 自定义组件样式 */
            .section-title {
                text-align: center;
                font-size: 24px;
                margin: 30px 0 20px;
                position: relative;
            }
            .section-title::after {
                content: '';
                display: block;
                width: 60px;
                height: 3px;
                background: #3B82F6;
                margin: 10px auto 0;
            }
            
            /* 视频容器 */
            .video-container {
                position: relative;
                display: flex;
                justify-content: center;
            }
            .video-item {
                border-radius: 8px;
                box-shadow: 0 4px 18px rgba(0,0,0,0.15);
                display: block;
                margin: 0 auto 15px;
                transition: all 0.3s;
            }
            .video-item:hover {
                transform: translateY(-5px);
                box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            }
            .caption {
                font-size: 14px;
                line-height: 1.5;
                color: #333;
                margin: 10px 0;
            }
            
            /* 视频加载状态 */
            .video-loading {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                display: flex;
                justify-content: center;
                align-items: center;
                background: rgba(0,0,0,0.7);
                z-index: 1;
                border-radius: 8px;
            }
            .spinner {
                width: 40px;
                height: 40px;
                border: 4px solid rgba(255,255,255,0.1);
                border-left-color: #3B82F6;
                border-radius: 50%;
                animation: spin 1s linear infinite;
            }
            .video-fallback {
                display: none;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                color: #fff;
                z-index: 2;
                border-radius: 8px;
                text-align: center;
            }
            .video-fallback i {
                font-size: 3rem;
                margin-bottom: 10px;
                color: #3B82F6;
            }
            @keyframes spin {
                to { transform: rotate(360deg); }
            }
            
            /* 轮播组件 */
            .glide__slide:hover { cursor: grab; }
            .glide__slide:active { cursor: grabbing; }
            .glide__slide img { width: 90%; }
            
            /* 轮播导航圆点样式 */
            .glide__bullets {
                text-align: center;
                margin: 20px 0;
            }
            .glide__bullet {
                width: 12px;
                height: 12px;
                border-radius: 50%;
                background: #ddd;
                border: none;
                padding: 0;
                cursor: pointer;
                transition: all 0.3s ease;
                margin: 0 5px;
                box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            }
            .glide__bullet--active {
                background: #3B82F6;
                width: 16px;
                height: 16px;
            }
            .glide__bullet:hover:not(.glide__bullet--active) {
                background: #999;
                transform: scale(1.1);
            }
            
            /* 响应式调整 */
            @media (max-width: 768px) {
                .video-item {
                    width: 90% !important;
                }
                .glide__bullet {
                    width: 10px;
                    height: 10px;
                }
                .glide__bullet--active {
                    width: 14px;
                    height: 14px;
                }
                .caption {
                    font-size: 13px;
                }
            }
        </style>
    </head>
    <body>
        <div class="section">
            <h1 class="project-title text-center font-bold text-3xl md:text-4xl text-gray-800 mb-6">
                ChronoTailor: Harnessing Attention Guidance for Fine-Grained Video Virtual Try-On
            </h1>
            
            <div class="authors text-center mb-4">
                <a href="" class="inline-block mx-2 text-blue-600 hover:text-blue-800 transition-colors">Jinjuan Wang <sup>1*</sup></a>
                <a href="" class="inline-block mx-2 text-blue-600 hover:text-blue-800 transition-colors">Wenzhang Sun <sup>2*</sup></a>
                <a href="" class="inline-block mx-2 text-blue-600 hover:text-blue-800 transition-colors">Ming Li <sup>1</sup></a>
                <a href="" class="inline-block mx-2 text-blue-600 hover:text-blue-800 transition-colors">Yun Zheng <sup>1</sup></a>
                <a href="" class="inline-block mx-2 text-blue-600 hover:text-blue-800 transition-colors">Fanyao Li <sup>1</sup></a>
                <a href="" class="inline-block mx-2 text-blue-600 hover:text-blue-800 transition-colors">Zhulin Tao <sup>1†</sup></a>
                <a href="" class="inline-block mx-2 text-blue-600 hover:text-blue-800 transition-colors">Donglin Di <sup>2</sup></a>
                <a href="" class="inline-block mx-2 text-blue-600 hover:text-blue-800 transition-colors">Hao Li <sup>2</sup></a>
                <a href="" class="inline-block mx-2 text-blue-600 hover:text-blue-800 transition-colors">Wei Chen <sup>2</sup></a>
                <a href="" class="inline-block mx-2 text-blue-600 hover:text-blue-800 transition-colors">Xianglin Huang <sup>1</sup></a>
            </div>

            <div class="affiliations text-center mb-8">
                <span class="inline-block mx-3 text-gray-600"><sup>1</sup> <a href="https://www.cuc.edu.cn" class="text-blue-600 hover:underline">Communication University of China</a></span>
                <span class="inline-block mx-3 text-gray-600"><sup>2</sup> <a href="" class="text-blue-600 hover:underline">Li Auto</a></span>
            </div>

            <div class="project-icons flex justify-center gap-8 mb-8">
                <a href="https://arxiv.org/abs/2506.05858" id="paper-link" class="flex flex-col items-center group">
                    <i class="fa fa-file text-3xl text-blue-600 group-hover:text-blue-800 transition-colors"></i> 
                    <span class="mt-2 font-medium">Paper</span>
                </a>
                <a href="https://github.com/ChronoTailor/ChronoTailor/" id="code-link" class="flex flex-col items-center group">
                    <i class="fa fa-github text-3xl text-blue-600 group-hover:text-blue-800 transition-colors"></i> 
                    <span class="mt-2 font-medium">Code</span>
                </a>
            </div>

            <div class="teaser-image text-center mb-10">
                <img src="src/Fig1_00.png" style="width:90%;" class="rounded-lg shadow-lg mx-auto">
                <p class="caption mt-4 text-gray-600"><strong>ChronoTailor</strong> excels at generating high-quality virtual try-ons for diverse garments, effectively maintaining visual coherence and preserving background details.</p>
            </div>

            <div class="section-title">Abstract</div>
            <div class="content max-w-4xl mx-auto px-4 mb-12">
                <p class="mb-4 text-gray-700">Video virtual try-on aims to seamlessly replace the clothing of a person in a source video with a target garment. Despite significant progress in this field, existing approaches still struggle to maintain continuity and reproduce garment details.</p>
                <p class="mb-4 text-gray-700">In this paper, we introduce ChronoTailor, a diffusion-based framework that generates temporally consistent videos while preserving fine-grained garment details. By employing a precise spatio-temporal attention mechanism to guide the integration of fine-grained garment features, ChronoTailor achieves robust try-on performance.</p>
                <p class="mb-4 text-gray-700">First, ChronoTailor leverages region-aware spatial guidance to steer the evolution of spatial attention and employs an attention-driven temporal feature fusion mechanism to generate more continuous temporal features. This dual approach not only enables fine-grained local editing but also effectively mitigates artifacts arising from video dynamics.</p>
                <p class="text-gray-700">Second, ChronoTailor integrates multi-scale garment features to preserve low-level visual details and incorporates a garment-pose feature alignment to ensure temporal continuity during dynamic motion. Additionally, we collect StyleDress, a new dataset featuring intricate garments, varied environments, and diverse poses, offering advantages over existing public datasets, and will be publicly available for research. Extensive experiments show that ChronoTailor maintains spatio-temporal continuity and preserves garment details during motion, significantly outperforming previous methods.</p>
            </div>


            <div class="section-title">Overview of ChronoTailor</div>
            <div class="content max-w-4xl mx-auto px-4 mb-12">
                <p class="mb-4 text-gray-700">ChronoTailor aims to generate temporally coherent virtual try-on videos while preserving fine-grained garment details.</p>
                <p class="mb-4 text-gray-700">ChronoTailor  consists of two main components: (1) Spatial-Temporal Attention Guidance, which includes Region-Aware Spatial Guidance (RASG) that uses segmentation masks to guide spatial attention map evolution, and Attention-Driven Temporal Feature Fusion (ATFF), which employs an asymmetric cross-space attention mechanism using original features as queries and randomly fused other frame features as key-values to integrate temporal information effectively. </p>
                <p class="mb-6 text-gray-700">(2) Multi-scale Garment-Pose Feature Alignment, which first applies Adaptive Multi-scale Feature Extraction (AMFE) to enhance low-level garment details, and then aligns garment features with pose features using Garment-Pose Feature Alignment (GPFA).</p>
                
                <div class="text-center mb-8">
                    <img src="src/Fig2Model_00.png" style="width:90%;" class="rounded-lg shadow-md mx-auto">
                    <p class="caption mt-4 text-gray-600"><strong>Architecture of the ChronoTailor.</strong> Spatial-Temporal Attention Guidance enables the acquisition of stable guidance for garment feature injection. Multi-scale Garment-Pose Feature Alignment, meanwhile, facilitates the capture of more precise garment information during motion.</p>
                </div>

                <div class="text-center mb-12">
                    <img src="src/supp_styledress_00.png" style="width:60%;" class="rounded-lg shadow-md mx-auto">
                    <p class="caption mt-4 text-gray-600"><strong>Sample pairs from the StyleDress.</strong></p>
                </div>
            </div>

            <div class="section-title">Visualization of Methods</div>
            <div class="max-w-5xl mx-auto px-4 mb-16">
                <div class="glide1">
                    <div class="glide__bullets" data-glide-el="controls[nav]">
                        <button class="glide__bullet glide__bullet--active" data-glide-dir="=0"></button>
                        <button class="glide__bullet" data-glide-dir="=1"></button>
                        <button class="glide__bullet" data-glide-dir="=2"></button>
                        <button class="glide__bullet" data-glide-dir="=3"></button>
                        <button class="glide__bullet" data-glide-dir="=4"></button>
                        <button class="glide__bullet" data-glide-dir="=5"></button>
                        <button class="glide__bullet" data-glide-dir="=6"></button>
                    </div>
                    <div class="glide__track" data-glide-el="track">
                        <ul class="glide__slides">
                            <li class="glide__slide text-center">
                                <img src="src/VIVID_00.png" style="width:70%;" class="rounded-lg shadow-md mx-auto">
                                <p class="caption mt-4 text-gray-600"><strong>Visual comparison of ours and other methods.</strong> Our method demonstrates superior capability in generating clearer texture details within the editing region, producing more plausible results that exhibit enhanced visual fidelity and structural coherence.</p>
                            </li>
                            
                            <li class="glide__slide text-center">
                                <img src="src/viton_00.png" style="width:60%;" class="rounded-lg shadow-md mx-auto">
                                <p class="caption mt-4 text-gray-600"><strong>Qualitative comparison on the VITON-HD dataset.</strong> </p>
                            </li>
                            
                            <li class="glide__slide text-center">
                                <img src="src/Fig6_accessories_00.png" style="width:60%;" class="rounded-lg shadow-md mx-auto">
                                <p class="caption mt-4 text-gray-600"><strong>ChronoTailor effectively preserves information in non - edited regions.</strong> </p>
                            </li>

                            <li class="glide__slide text-center">
                                <img src="src/Fig8_inthewild_00.png" style="width:60%;" class="rounded-lg shadow-md mx-auto">
                                <p class="caption mt-4 text-gray-600"><strong>Qualitative results of our method on the StyleDress dataset.</strong> </p>
                            </li>

                            <li class="glide__slide text-center">
                                <img src="src/AMFE_00.png" style="width:60%;" class="rounded-lg shadow-md mx-auto">
                                <p class="caption mt-4 text-gray-600"><strong>Ablation study of Adaptive Multi-scale Feature Extraction. The upper garment try-on fully recovers two floral patterns, demonstrating ChronoTailor’s capability to preserve intricate textures and semantic details.</strong> </p>
                            </li>

                            <li class="glide__slide text-center">
                                <img src="src/ATFF_00.png" style="width:60%;" class="rounded-lg shadow-md mx-auto">
                                <p class="caption mt-4 text-gray-600"><strong>Ablation study of Attention-Driven Temporal Feature Fusion.</strong> </p>
                            </li>

                            <li class="glide__slide text-center">
                                <img src="src/RASG_00.png" style="width:60%;" class="rounded-lg shadow-md mx-auto">
                                <p class="caption mt-4 text-gray-600"><strong>Ablation study of Region-Aware Spatial Guidance.</strong> Our method balances attention between editing and non - editing regions. </p>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="section-title">More Results</div>
            <div class="max-w-5xl mx-auto px-4 mb-16">
                <div class="glide2">
                    <div class="glide__bullets" data-glide-el="controls[nav]">
                        <button class="glide__bullet glide__bullet--active" data-glide-dir="=0"></button>
                        <button class="glide__bullet" data-glide-dir="=1"></button>
                        <button class="glide__bullet" data-glide-dir="=2"></button>
                        <button class="glide__bullet" data-glide-dir="=3"></button>
                        <button class="glide__bullet" data-glide-dir="=4"></button>
                        <button class="glide__bullet" data-glide-dir="=5"></button>
                        <button class="glide__bullet" data-glide-dir="=6"></button>
                        <button class="glide__bullet" data-glide-dir="=7"></button>
                        <button class="glide__bullet" data-glide-dir="=8"></button>
                        <button class="glide__bullet" data-glide-dir="=9"></button>
                    </div>
                    
                    <div class="glide__track" data-glide-el="track">
                        <ul class="glide__slides">
                            <!-- 视频1 -->
                            <li class="glide__slide">
                                <div class="video-container">
                                    <video class="video-item hover-lift" style="width: 100%;" muted playsinline>
                                        <source src="src/6191.mp4" type="video/mp4">
                                        <div class="video-fallback">
                                            <i class="fas fa-exclamation-circle"></i>
                                            <p>您的浏览器不支持HTML5视频播放</p>
                                        </div>
                                    </video>
                                    <div class="video-loading">
                                        <div class="spinner"></div>
                                    </div>
                                </div>
                            </li>
                            
                            <!-- 视频2 -->
                            <li class="glide__slide">
                                <div class="video-container">
                                    <video class="video-item hover-lift" style="width: 100%;" muted playsinline>
                                        <source src="src/6192.mp4" type="video/mp4">
                                        <div class="video-fallback">
                                            <i class="fas fa-exclamation-circle"></i>
                                            <p>您的浏览器不支持HTML5视频播放</p>
                                        </div>
                                    </video>
                                    <div class="video-loading">
                                        <div class="spinner"></div>
                                    </div>
                                </div>
                            </li>
                            
                            <!-- 视频3 -->
                            <li class="glide__slide">
                                <div class="video-container">
                                    <video class="video-item hover-lift" style="width: 100%;" muted playsinline>
                                        <source src="src/6193.mp4" type="video/mp4">
                                        <div class="video-fallback">
                                            <i class="fas fa-exclamation-circle"></i>
                                            <p>您的浏览器不支持HTML5视频播放</p>
                                        </div>
                                    </video>
                                    <div class="video-loading">
                                        <div class="spinner"></div>
                                    </div>
                                </div>
                            </li>
                            
                            <!-- 视频4 -->
                            <li class="glide__slide">
                                <div class="video-container">
                                    <video class="video-item hover-lift" style="width: 100%;" muted playsinline>
                                        <source src="src/6194.mp4" type="video/mp4">
                                        <div class="video-fallback">
                                            <i class="fas fa-exclamation-circle"></i>
                                            <p>您的浏览器不支持HTML5视频播放</p>
                                        </div>
                                    </video>
                                    <div class="video-loading">
                                        <div class="spinner"></div>
                                    </div>
                                </div>
                            </li>
                            
                            <!-- 视频5 -->
                            <li class="glide__slide">
                                <div class="video-container">
                                    <video class="video-item hover-lift" style="width: 100%;" muted playsinline>
                                        <source src="src/6195.mp4" type="video/mp4">
                                        <div class="video-fallback">
                                            <i class="fas fa-exclamation-circle"></i>
                                            <p>您的浏览器不支持HTML5视频播放</p>
                                        </div>
                                    </video>
                                    <div class="video-loading">
                                        <div class="spinner"></div>
                                    </div>
                                </div>
                            </li>
                            
                            <!-- 视频6 -->
                            <li class="glide__slide">
                                <div class="video-container">
                                    <video class="video-item hover-lift" style="width: 100%;" muted playsinline>
                                        <source src="src/6196.mp4" type="video/mp4">
                                        <div class="video-fallback">
                                            <i class="fas fa-exclamation-circle"></i>
                                            <p>您的浏览器不支持HTML5视频播放</p>
                                        </div>
                                    </video>
                                    <div class="video-loading">
                                        <div class="spinner"></div>
                                    </div>
                                </div>
                            </li>
                            
                            <!-- 视频7 -->
                            <li class="glide__slide">
                                <div class="video-container">
                                    <video class="video-item hover-lift" style="width: 100%;" muted playsinline>
                                        <source src="src/6197.mp4" type="video/mp4">
                                        <div class="video-fallback">
                                            <i class="fas fa-exclamation-circle"></i>
                                            <p>您的浏览器不支持HTML5视频播放</p>
                                        </div>
                                    </video>
                                    <div class="video-loading">
                                        <div class="spinner"></div>
                                    </div>
                                </div>
                            </li>
                            
                            <!-- 视频8 -->
                            <li class="glide__slide">
                                <div class="video-container">
                                    <video class="video-item hover-lift" style="width: 100%;" muted playsinline>
                                        <source src="src/6198.mp4" type="video/mp4">
                                        <div class="video-fallback">
                                            <i class="fas fa-exclamation-circle"></i>
                                            <p>您的浏览器不支持HTML5视频播放</p>
                                        </div>
                                    </video>
                                    <div class="video-loading">
                                        <div class="spinner"></div>
                                    </div>
                                </div>
                            </li>
                            
                            <!-- 视频9 -->
                            <li class="glide__slide">
                                <div class="video-container">
                                    <video class="video-item hover-lift" style="width: 100%;" muted playsinline>
                                        <source src="src/6199.mp4" type="video/mp4">
                                        <div class="video-fallback">
                                            <i class="fas fa-exclamation-circle"></i>
                                            <p>您的浏览器不支持HTML5视频播放</p>
                                        </div>
                                    </video>
                                    <div class="video-loading">
                                        <div class="spinner"></div>
                                    </div>
                                </div>
                            </li>
                            
                            <!-- 视频10 -->
                            <li class="glide__slide">
                                <div class="video-container">
                                    <video class="video-item hover-lift" style="width: 100%;" muted playsinline>
                                        <source src="src/61910.mp4" type="video/mp4">
                                        <div class="video-fallback">
                                            <i class="fas fa-exclamation-circle"></i>
                                            <p>您的浏览器不支持HTML5视频播放</p>
                                        </div>
                                    </video>
                                    <div class="video-loading">
                                        <div class="spinner"></div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="section-title">BibTeX</div>
            <div class="container is-max-desktop content max-w-4xl mx-auto px-4 mb-16">
                <pre class="bg-gray-100 p-4 rounded-lg overflow-x-auto"><code>@article{wang2025chronotailor,
    title={ChronoTailor: Harnessing Attention Guidance for Fine-Grained Video Virtual Try-On},
    author={Wang, Jinjuan and Sun, Wenzhang and Li, Ming and Zheng, Yun and Li, Fanyao and Tao, Zhulin and Di, Donglin and Li, Hao and Chen, Wei and Huang, Xianglin},
    journal={arXiv preprint arXiv:2506.05858},
    year={2025}
}</code></pre>
            </div>
        </div>

        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // 初始化图片轮播
                const glide1 = new Glide('.glide1', {
                    type: 'carousel',
                    startAt: 0,
                    perView: 1,
                    autoplay: 5000,
                    animationDuration: 500,
                    gap: 20,
                    keyboard: true,
                    touch: true
                });
                glide1.mount();
                
                // 初始化视频轮播
                const glide2 = new Glide('.glide2', {
                    type: 'carousel',
                    startAt: 0,
                    perView: 1,
                    autoplay: 5000,
                    animationDuration: 500,
                    gap: 20,
                    keyboard: true,
                    touch: true,
                    // reorder: false
                });
                glide2.mount();
                
                // 轮播切换时暂停其他视频，播放当前视频
                glide2.on(['run.after'], function() {
                    const currentSlide = this.index;
                    const allVideos = document.querySelectorAll('.glide__slide video');
                    
                    // 暂停所有视频
                    allVideos.forEach(video => {
                        video.pause();
                    });
                    
                    // 播放当前视频
                    if (allVideos[currentSlide]) {
                        const currentVideo = allVideos[currentSlide];
                        const fallback = currentVideo.querySelector('.video-fallback');
                        const loading = currentVideo.parentElement.querySelector('.video-loading');
                        
                        // 显示加载动画
                        if (loading) loading.style.display = 'flex';
                        
                        // 尝试播放视频
                        currentVideo.play()
                            .then(() => {
                                // 播放成功，隐藏加载动画和错误提示
                                if (loading) loading.style.display = 'none';
                                if (fallback) fallback.style.display = 'none';
                            })
                            .catch(err => {
                                console.error('视频播放失败:', err);
                                // 播放失败，隐藏加载动画，显示错误提示
                                if (loading) loading.style.display = 'none';
                                if (fallback) {
                                    fallback.style.display = 'flex';
                                    fallback.innerHTML = `
                                        <i class="fas fa-exclamation-circle text-red-500"></i>
                                        <p class="text-white">视频加载失败</p>
                                        <p class="text-white text-sm mt-2">错误: ${err.message}</p>
                                    `;
                                }
                            });
                    }
                });
                
                // 视频加载逻辑
                const videos = document.querySelectorAll('.video-item');
                videos.forEach(video => {
                    const fallback = video.querySelector('.video-fallback');
                    const loading = video.parentElement.querySelector('.video-loading');
                    
                    // 视频加载开始
                    video.addEventListener('loadstart', function() {
                        if (loading) loading.style.display = 'flex';
                        if (fallback) fallback.style.display = 'none';
                    });
                    
                    // 视频加载完成
                    video.addEventListener('canplay', function() {
                        if (loading) loading.style.display = 'none';
                    });
                    
                    // 视频加载错误
                    video.addEventListener('error', function() {
                        if (loading) loading.style.display = 'none';
                        if (fallback) {
                            fallback.style.display = 'flex';
                            fallback.innerHTML = `
                                <i class="fas fa-exclamation-circle text-red-500"></i>
                                <p class="text-white">视频加载失败</p>
                                <button class="mt-3 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded transition-colors" onclick="this.parentElement.style.display='none';this.closest('.video-container').querySelector('video').load()">
                                    重试
                                </button>
                            `;
                        }
                        console.error('视频加载错误:', video.error);
                    });
                    
                    // 视频播放结束后循环播放
                    video.addEventListener('ended', function() {
                        if (this.muted) { // 仅循环静音视频
                            this.play();
                        }
                    });
                    
                    // 视频元数据加载完成
                    video.addEventListener('loadedmetadata', function() {
                        if (loading) loading.style.display = 'none';
                    });
                });
                
                // 视频进入视口时才加载（需要Intersection Observer API）
                if ('IntersectionObserver' in window) {
                    const observer = new IntersectionObserver((entries) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                const video = entry.target.querySelector('video');
                                if (video) {
                                    video.load();
                                    // 开始轮播
                                    if (glide2 && !glide2.isGliding) {
                                        glide2.play();
                                    }
                                }
                            } else {
                                const video = entry.target.querySelector('video');
                                if (video) {
                                    video.pause();
                                }
                            }
                        });
                    }, { threshold: 0.1 });
                    
                    // 观察所有轮播项
                    document.querySelectorAll('.glide__slide').forEach(slide => {
                        observer.observe(slide);
                    });
                }
            });
        </script>
    </body>
</html>
